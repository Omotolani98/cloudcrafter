# **CloudCrafter**

CloudCrafter is a lightweight tool designed for DevOps engineers to manage cloud infrastructure across AWS, Azure, and GCP. It leverages existing CLI configurations to authenticate with cloud providers, eliminating the need to manage credentials within the tool.

---

## **Features**
- **Multi-Cloud Support**: Manage resources across AWS, Azure, and GCP.
- **Authentication-Free Setup**: Relies on pre-configured CLI tools for cloud provider authentication.
- **Unified API Interface**: Simplifies provisioning, retrieving, and deleting cloud resources.
- **Declarative Configurations**: Accepts both JSON and YAML formats for resource definitions.

---

## **Prerequisites**
Before using this tool, ensure the following CLI tools are installed and configured on your machine:
1. **AWS CLI**:
   - Install: [AWS CLI Installation](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html)
   - Configure:
     ```bash
     aws configure
     ```
   - Verify:
     ```bash
     aws sts get-caller-identity
     ```

2. **Azure CLI**:
   - Install: [Azure CLI Installation](https://learn.microsoft.com/en-us/cli/azure/install-azure-cli)
   - Login:
     ```bash
     az login
     ```
   - Verify:
     ```bash
     az account show
     ```

3. **Google Cloud CLI**:
   - Install: [GCP CLI Installation](https://cloud.google.com/sdk/docs/install)
   - Authenticate:
     ```bash
     gcloud auth login
     ```
   - Verify:
     ```bash
     gcloud auth list
     ```

---

## **Getting Started**

### **1. Clone the Repository**
```bash
git clone <repository-url>
cd cloudcrafter
```

### **2. Install Dependencies**
```bash
go mod tidy
```

### **3. Run the Application**
```bash
go run cmd/server/main.go
```

### **4. Test the API**
Use a tool like cURL, Postman, or Bruno to interact with the API.

---

## **API Documentation**

### **Base URL**
```plaintext
http://localhost:5060
```

### **Endpoints**

#### **1. Create Resource**
- **Method**: `POST`
- **URL**: `/resources`
- **Headers**:
  - `Content-Type: application/json` or `application/x-yaml`
- **Request Body (JSON)**:
  ```json
  {
    "provider": "aws",
    "resources": [
      {
        "type": "vm",
        "name": "test-instance",
        "machineType": "t2.micro",
        "region": "us-east-1",
        "image": "ami-0abcdef1234567890"
      }
    ]
  }
  ```
- **Response**:
  ```json
  {
    "provisionedResources": [
      {
        "id": "i-0abc12345def67890",
        "name": "test-instance",
        "type": "vm",
        "provider": "aws",
        "region": "us-east-1",
        "status": "running"
      }
    ]
  }
  ```

---

#### **2. Delete Resource**
- **Method**: `DELETE`
- **URL**: `/resources/:provider/:id`
- **Example**:
  ```bash
  curl -X DELETE http://localhost:5060/resources/aws/i-0abc12345def67890
  ```
- **Response**:
  ```json
  {
    "message": "Resource deleted successfully"
  }
  ```

---

#### **3. Get Resource**
- **Method**: `GET`
- **URL**: `/resources/:provider/:id`
- **Example**:
  ```bash
  curl -X GET http://localhost:5060/resources/aws/i-0abc12345def67890
  ```
- **Response**:
  ```json
  {
    "id": "i-0abc12345def67890",
    "name": "test-instance",
    "type": "vm",
    "provider": "aws",
    "region": "us-east-1",
    "status": "running"
  }
  ```

---

## **How It Works**
1. **Authentication**:
   - The tool uses the configured CLI credentials for each provider:
     - AWS: Reads credentials from `~/.aws/credentials` or environment variables.
     - Azure: Uses tokens generated by `az login`.
     - GCP: Uses credentials from `gcloud auth`.

2. **Provision Resources**:
   - Accepts a declarative configuration (JSON/YAML) and provisions resources via the cloud providerâ€™s SDK.

3. **Delete and Retrieve Resources**:
   - Interacts with cloud provider APIs to delete or fetch details about resources.

---

## **Future Enhancements**
- Add support for other providers (e.g., DigitalOcean).
- Implement a CLI for interacting with the tool.
- Add advanced monitoring and alerting capabilities.

---

## **Contributing**
We welcome contributions! To contribute:
1. Fork the repository.
2. Create a new feature branch:
   ```bash
   git checkout -b feature-name
   ```
3. Commit your changes:
   ```bash
   git commit -m "Add feature-name"
   ```
4. Push to the branch:
   ```bash
   git push origin feature-name
   ```
5. Open a pull request.

---

## **License**
This project is licensed under the MIT License.